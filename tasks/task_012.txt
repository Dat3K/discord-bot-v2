# Task ID: 12
# Title: Implement late registration system
# Status: pending
# Dependencies: 7, 8, 9, 10
# Priority: high
# Description: Create the system for late meal registration
# Details:
Implement the late registration system for morning (5:00-11:00) and evening (11:30-18:15) periods. Create embed messages with appropriate reaction options. Store registration data in the database and implement end-of-period reporting to show who registered late.

# Test Strategy:
Test the late registration system by verifying that messages are sent at the correct time, reactions are tracked correctly, and end-of-period reports are generated accurately.

# Subtasks:
## 1. Database Schema Update for Late Registration [pending]
### Dependencies: None
### Description: Modify the database schema to include fields for tracking late registration periods (morning/evening) and associated timestamps.
### Details:
Add columns for 'late_registration_start', 'late_registration_end', 'period' (morning/evening) to the registration table.

## 2. Implement Late Registration Logic [pending]
### Dependencies: 12.1
### Description: Implement the core logic for handling late registrations, including checking if the current time falls within the allowed late registration periods (morning/evening).
### Details:
Create functions to determine if a user is eligible for late registration based on the current time and the defined morning/evening periods. Handle overlapping periods.

## 3. Embed Message Creation for Late Registration [pending]
### Dependencies: 12.2
### Description: Create embed messages with appropriate reaction options for late registration, clearly indicating the period (morning/evening) and any associated late registration fees or rules.
### Details:
Design embed messages that display the registration period, instructions, and relevant information. Include reaction options for confirming or canceling late registration.

## 4. Data Storage for Late Registrations [pending]
### Dependencies: 12.1, 12.2
### Description: Store late registration data in the database, including the user ID, registration period, timestamp, and any other relevant information.
### Details:
Update the registration process to store the 'late_registration_start', 'late_registration_end', and 'period' values in the database when a user registers late.

## 5. End-of-Period Reporting for Late Registrations [pending]
### Dependencies: 12.4
### Description: Implement end-of-period reporting to generate reports on late registrations, including the number of late registrations, the total revenue generated from late registration fees, and other relevant statistics.
### Details:
Create reports that summarize late registration data for each period (morning/evening). Include metrics such as the number of late registrations, revenue, and user demographics.

## 6. Timezone Handling for Late Registrations [pending]
### Dependencies: 12.2, 12.5
### Description: Ensure correct timezone handling for late registration periods, ensuring that the registration logic and reporting are accurate regardless of the user's timezone.
### Details:
Implement timezone conversion to ensure that the late registration periods are correctly interpreted and applied based on the server's timezone. Store all timestamps in UTC.

